{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://narratoria.dev/schemas/campaign/player-template.schema.json",
  "title": "Player Character Template",
  "description": "Defines constraints and options for player character creation in Narratoria campaigns",
  "type": "object",
  "properties": {
    "character_creation": {
      "type": "object",
      "properties": {
        "mode": {
          "type": "string",
          "enum": ["freeform", "guided", "preset"],
          "description": "Character creation mode",
          "default": "guided"
        },
        "guidance": {
          "type": "string",
          "description": "Guidance text shown during character creation",
          "examples": [
            "You are a traveler arriving in Camelot. Who are you, and what brings you here?"
          ]
        }
      }
    },
    "allowed_races": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["name"],
        "properties": {
          "name": {
            "type": "string",
            "description": "Race name"
          },
          "description": {
            "type": "string",
            "description": "Race description for player selection"
          },
          "traits": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Inherent traits of this race"
          },
          "restrictions": {
            "type": "string",
            "description": "Any restrictions or special rules for this race"
          }
        }
      },
      "description": "Available races/species for player character (empty = any)",
      "examples": [[
        {
          "name": "Human",
          "description": "Versatile and adaptable",
          "traits": ["diplomatic", "ambitious"]
        },
        {
          "name": "Elf",
          "description": "Ancient and magical",
          "traits": ["magical_affinity", "long_lived"]
        }
      ]]
    },
    "allowed_classes": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["name"],
        "properties": {
          "name": {
            "type": "string",
            "description": "Class name"
          },
          "description": {
            "type": "string",
            "description": "Class description for player selection"
          },
          "abilities": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Starting abilities for this class"
          },
          "restrictions": {
            "type": "string",
            "description": "Any restrictions or requirements for this class"
          }
        }
      },
      "description": "Available classes/professions (empty = any)",
      "examples": [[
        {
          "name": "Knight",
          "description": "Honorable warrior sworn to the code of chivalry",
          "abilities": ["swordsmanship", "mounted_combat", "leadership"]
        },
        {
          "name": "Wizard",
          "description": "Scholar of the arcane arts",
          "abilities": ["spellcasting", "magical_knowledge", "ritual_magic"]
        }
      ]]
    },
    "allowed_backgrounds": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["name"],
        "properties": {
          "name": {
            "type": "string",
            "description": "Background name"
          },
          "description": {
            "type": "string",
            "description": "Background description for player selection"
          },
          "starting_items": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Items the player starts with if they choose this background"
          },
          "starting_relationships": {
            "type": "object",
            "additionalProperties": {
              "type": "string"
            },
            "description": "Predefined relationships with NPCs"
          }
        }
      },
      "description": "Available character backgrounds (empty = any)",
      "examples": [[
        {
          "name": "Noble",
          "description": "Born to privilege and responsibility",
          "starting_items": ["signet_ring", "fine_clothes"],
          "starting_relationships": {
            "arthur": "Acquaintance from court"
          }
        }
      ]]
    },
    "required_attributes": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Attributes the player must define during creation",
      "examples": [["name", "appearance", "motivation"]]
    },
    "optional_attributes": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Optional attributes the player can define",
      "examples": [["hometown", "family", "secrets"]]
    },
    "starting_stats": {
      "type": "object",
      "description": "Starting statistics (system-dependent)",
      "properties": {
        "point_pool": {
          "type": "integer",
          "description": "Total points to distribute among stats"
        },
        "attributes": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["name"],
            "properties": {
              "name": {
                "type": "string"
              },
              "min": {
                "type": "integer",
                "description": "Minimum value"
              },
              "max": {
                "type": "integer",
                "description": "Maximum value"
              },
              "default": {
                "type": "integer",
                "description": "Default starting value"
              }
            }
          }
        }
      }
    },
    "starting_location": {
      "type": "string",
      "description": "Where the player begins the campaign",
      "examples": ["Gates of Camelot", "Merlin's Tower", "Village of Avalon"]
    },
    "starting_items": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Items all players start with regardless of choices",
      "examples": [["traveler's cloak", "basic rations", "worn dagger"]]
    },
    "constraints": {
      "type": "object",
      "properties": {
        "no_magic": {
          "type": "boolean",
          "description": "Player cannot use magic"
        },
        "must_be_human": {
          "type": "boolean",
          "description": "Player must be human (overrides allowed_races)"
        },
        "fixed_background": {
          "type": "string",
          "description": "Player has this specific background (no choice)"
        },
        "era_locked": {
          "type": "string",
          "description": "Player must fit within this era/time period"
        },
        "custom": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Custom constraints described in natural language",
          "examples": [["Must be from outside Camelot", "Cannot know Arthur personally"]]
        }
      },
      "description": "Hard constraints on character creation"
    },
    "themes": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Suggested character themes that fit the campaign",
      "examples": [["redemption", "loyalty vs. truth", "the burden of knowledge"]]
    },
    "prompts": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["question"],
        "properties": {
          "question": {
            "type": "string",
            "description": "Question to ask during character creation"
          },
          "guidance": {
            "type": "string",
            "description": "Guidance for answering this question"
          },
          "examples": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Example answers"
          }
        }
      },
      "description": "Questions to guide character creation",
      "examples": [[
        {
          "question": "What secret do you carry?",
          "guidance": "Think about something that defines your character but isn't immediately obvious",
          "examples": ["I witnessed a crime I couldn't prevent", "I'm searching for my lost sibling"]
        }
      ]]
    }
  },
  "additionalProperties": false
}
